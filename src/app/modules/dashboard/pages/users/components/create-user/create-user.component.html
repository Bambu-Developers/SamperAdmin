<div class="sa-dashboard-main-content">
  <div class="sa-create-user-content">
    <h1 class="sa-charcoal-grey sa-text-20 sa-roboto">Nuevo usuario</h1>
    <form (ngSubmit)="createUser()" class="sa-create-user-form" [formGroup]="createUserForm">
      <mat-form-field class="sa-create-user-select sa-no-label">
        <mat-select (selectionChange)="selectedRol = $event.value" placeholder="Tipo de rol" formControlName="rol">
          <mat-option value="1">Vendedor</mat-option>
          <mat-option value="2">Almacenista</mat-option>
          <mat-option value="3">Administrador</mat-option>
        </mat-select>
        <mat-error *ngIf="createUserForm.controls.rol.hasError('required')">{{language.errorRequired}}</mat-error>
      </mat-form-field>
      <mat-form-field *ngIf="selectedRol == 1" class="sa-create-user-select sa-no-label">
        <mat-select placeholder="Ruta" formControlName="route">
          <mat-option value="1">Ruta 1</mat-option>
          <mat-option value="2">Ruta 2</mat-option>
          <mat-option value="3">Ruta 3</mat-option>
        </mat-select>
        <mat-error *ngIf="createUserForm.controls.route.hasError('required')">{{language.errorRequired}}</mat-error>
      </mat-form-field>
      <div *ngIf="selectedRol == 3" class="sa-create-user-admin">
        <p class="sa-charcoal-grey sa-text-14 sa-roboto">Acciones</p>
        <div class="sa-create-user-checkbox-group">
          <mat-checkbox (change)="changePermisions($event)" [value]="i" color="charcoal-grey" *ngFor="let permision of permisions; let i = index">{{permision}}</mat-checkbox>
        </div>
      </div>
      <mat-form-field class="sa-input-text">
        <input matInput placeholder="Nombre de la persona" formControlName="name">
        <mat-error *ngIf="createUserForm.controls.name.hasError('required')">{{language.errorRequired}}</mat-error>
      </mat-form-field>
      <mat-form-field class="sa-input-text">
        <input matInput placeholder="Correo electrÃ³nico" formControlName="email">
        <mat-error *ngIf="createUserForm.controls.email.hasError('required')">{{language.errorRequired}}</mat-error>
        <mat-error *ngIf="createUserForm.controls.email.hasError('email')||createUserForm.controls.email.hasError('pattern')">
          {{language.errorFormatEmail}}
        </mat-error>
        <mat-error *ngIf="createUserForm.controls.email.hasError('exists')">Este correo ya esta registrado</mat-error>
      </mat-form-field>
      <mat-form-field class="sa-input-text">
        <input [type]="showPassword?'text':'password'" matInput placeholder="{{language.placeholderPass}}"
          formControlName="password">
        <button mat-button matSuffix mat-icon-button type="button" (click)="showPassword = !showPassword">
          <mat-icon svgIcon="ic-eye"></mat-icon>
        </button>
        <mat-error *ngIf="createUserForm.controls.password.hasError('required')">{{language.errorRequired}}</mat-error>
        <mat-error *ngIf="createUserForm.controls.password.hasError('minlength') || createUserForm.controls.password.hasError('maxlength')">
          {{language.errorLengthPass}}
        </mat-error>
      </mat-form-field>
      <div class="sa-create-user-actions">
        <button [routerLink]="['/dashboard/users/']" class="sa-btn-small" mat-raised-button color="white">Cancelar</button>
        <button type="submit" class="sa-btn-small" mat-raised-button color="charcoal-grey">Crear usuario</button>
      </div>
    </form>
  </div>
</div>