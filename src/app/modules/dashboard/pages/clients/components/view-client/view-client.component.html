<div class="sa-dashboard-main-content">
  <div class="sa-view-client-content">
    <img src="/assets/icons/icon-vendedor-back-gray.svg" [routerLink]="['/dashboard/clients/']">
    <div class="sa-client-content">
      <h3 class="sa-text-24 sa-charcoal-grey sa-roboto">{{lanClient.clients}}</h3>
      <div class="sa-client-sections">
        <div class="sa-left-column">
          <mat-card class="sa-shop-image-card">
            <img src="{{dataSource?.photo}}" alt="N/A">
          </mat-card>
          <mat-card class="sa-bender-type-card sa-roboto sa-charcoal-grey sa-text-14">
            <mat-label class="sa-roboto-medium sa-text-18">Mayorista</mat-label>
            <div class="sa-purchased-products">
              <mat-label class="sa-roboto-medium"> {{lanClient.purchasedProducts}} </mat-label>
              <div class="sa-products">
                <!-- PRODUCTS TO SHOW -->
              </div>
            </div>
            <mat-label class="sa-roboto-medium"> {{lanClient.ticketAvarage}} </mat-label>
            <mat-label class="sa-amount">$9,500.00 MXN</mat-label>
          </mat-card>
        </div>
        <div class="sa-right-column">
          <mat-card class="sa-client-info">
            <div class="sa-client-title sa-roboto-medium sa-text-18 sa-charcoal-grey">
              <mat-label> {{dataSource?.bender_id}} </mat-label>
              <mat-label class="sa-route"> {{dataSource?.route_id}} </mat-label>
            </div>
            <div class="sa-info sa-brownish-grey sa-text-14 sa-roboto">
              <mat-label> {{dataSource?.name}} </mat-label>
              <mat-label> "{{dataSource?.shop_name}}" </mat-label>
              <!-- <div>
                  <mat-label> {{lanClient.client.address}} </mat-label>
                  <mat-label class="sa-charcoal-grey"> {{dataSource?.address}} </mat-label>
              </div> -->
              <div>
                <mat-label> {{lanClient.client.phone}} </mat-label>
                <mat-label class="sa-charcoal-grey"> {{dataSource?.phone}} </mat-label>
              </div>
              <div>
                <mat-label> {{lanClient.client.email}} </mat-label>
                <mat-label class="sa-charcoal-grey"> {{dataSource?.email}} </mat-label>
              </div>
              <!-- <div>
                  <mat-label> {{lanClient.client.createdBy}} </mat-label>
                  <mat-label class="sa-charcoal-grey"> {{dataSource?.created_by}} </mat-label>
              </div> -->
            </div>
          </mat-card>
          <mat-card class="sa-credit-info">
            <div *ngIf="dataSource?.haveCredit; then withCredit else withoutCredit">{{dataSource?.haveCredit}}</div>
            <ng-template #withCredit>
              <form (ngSubmit)="editCredit()" [formGroup]="creditEditForm">
                <div class="sa-with-credit">
                  <div class="sa-left-column-wc sa-roboto sa-charcoal-grey">
                    <mat-label class="sa-roboto-medium sa-text-18 sa-charcoal-grey">{{lanClient.credit.withCredit}}
                    </mat-label>
                    <div class="sa-credit-details">
                      <div class="sa-credit-labels">
                        <mat-label class="sa-roboto-medium sa-text-14">
                          {{lanClient.credit.assignedAmount}} </mat-label>
                        <mat-label class="sa-roboto-medium sa-text-14">
                          {{lanClient.credit.validity}} </mat-label>
                      </div>

                      <div class="sa-credit-inputs">
                        <mat-label class="sa-roboto sa-text-14" *ngIf="!isEditCredit">$6,500.00 MXN</mat-label>
                        <mat-label class="sa-roboto sa-text-14" id="right" *ngIf="!isEditCredit">20 / Ago / 2018</mat-label>
                        
                        <div *ngIf="isEditCredit" class="sa-edit-credit">
                          <mat-form-field class="sa-input-amount">
                            <input matInput placeholder="" [textMask]="{mask: currencyMask}"
                              formControlName="amountAssigned">
                            <span matPrefix>{{lanClient.credit.currencySymbol}}</span>
                            <span matSuffix>{{lanClient.credit.country}}</span>
                            <mat-error *ngIf="creditEditForm.controls.amountAssigned.hasError('required')">
                              {{language.errorRequired}}</mat-error>
                          </mat-form-field>

                          <mat-form-field class="sa-input-amount">
                            <input matInput placeholder="" [textMask]="{mask: currencyMask}"
                              formControlName="validityDate">
                            <span matPrefix>{{lanClient.credit.currencySymbol}}</span>
                            <span matSuffix>{{lanClient.credit.country}}</span>
                            <mat-error *ngIf="creditEditForm.controls.validityDate.hasError('required')">
                              {{language.errorRequired}}</mat-error>
                          </mat-form-field>
                        </div>

                      </div>


                    </div>
                    <div *ngIf="!isEditCredit" class="sa-credit-history">
                      <mat-label class="sa-roboto-medium sa-text-18 sa-charcoal-grey">{{lanClient.credit.creditHistory}}
                      </mat-label>
                      <div class="sa-amount-in-history">
                        <div class="sa-amount-assigned">
                          <mat-label class="sa-roboto-medium sa-text-14">{{lanClient.credit.assignedAmount}}</mat-label>
                          <mat-label class="sa-text-14">$3,500.00 MXN</mat-label>
                        </div>
                        <div class="sa-last-assigned">
                          <mat-label class="sa-roboto-medium sa-text-14">{{lanClient.credit.lastAmountAssigned}}
                          </mat-label>
                          <mat-label class="sa-text-14">12 / Jun / 2018</mat-label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="sa-right-column-wc">
                    <div class="sa-progress-bar">
                      <mat-progress-bar value="45"></mat-progress-bar>
                      <div class="sa-amount-in-bar">
                        <div class="sa-amount-used">
                          <div class="sa-dot"></div>
                          <div>
                            <mat-label class="sa-text-14">$1,500.00 MXN</mat-label>
                            <div>
                              <mat-label class="sa-label sa-text-12">{{lanClient.credit.amountUsed}}</mat-label>
                            </div>
                          </div>
                        </div>
                        <div class="sa-remaining-amount">
                          <div class="sa-dot"></div>
                          <div>
                            <mat-label class="sa-text-14">$5,000.00 MXN</mat-label>
                            <div>
                              <mat-label class="sa-label sa-text-12">{{lanClient.credit.remainingAmount}}</mat-label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="sa-edit-credit-actions" *ngIf="isEditCredit">
                      <button class="sa-btn-small" mat-raised-button color="white"
                        (click)="isEditCredit = false">{{language.cancel}}</button>
                      <button type="submit" class="sa-btn-small" mat-raised-button
                        color="charcoal-grey" [disabled]="!creditEditForm.valid">{{lanClient.save}}</button>
                    </div>

                  </div>
                  <img src="/assets/icons/icon-edit-gray.svg" (click)="isEditCredit = true" *ngIf="!isEditCredit" id="sa-icon-edit">
                </div>
                <div *ngIf="!isEditCredit" class="sa-transactions-list">
                  <mat-label class="sa-roboto-medium sa-text-14 sa-charcoal-grey">
                    {{lanClient.transactions.listOfTransactions}}</mat-label>
                </div>
              </form>
            </ng-template>
            <ng-template #withoutCredit>
              <div class="sa-without-credit">
                <ng-container *ngIf="!isAssignedCredit; else assignCredit">
                  <mat-label class="sa-roboto-medium sa-text-18 sa-charcoal-grey">{{lanClient.credit.withoutCredit}}
                  </mat-label>
                  <mat-label class="sa-roboto sa-text-12 sa-charcoal-grey" id="sa-assign-credit"
                    (click)="isAssignedCredit = true">{{lanClient.credit.assignCredit}}
                  </mat-label>
                </ng-container>
                <ng-template #assignCredit>
                  <form (ngSubmit)="assignCredit()" [formGroup]="creditAssignForm">
                    <div class="sa-assigning-credit sa-roboto sa-text-18 sa-charcoal-grey">
                      <div class="sa-credit-column">
                        <mat-label> {{lanClient.credit.assigningCredit}} </mat-label>
                        <div class="sa-labels sa-roboto-medium sa-text-14">
                          <mat-label> {{lanClient.credit.assignedAmount}} </mat-label>
                          <mat-label> {{lanClient.credit.validity}} </mat-label>
                        </div>
                        <div class="sa-inputs">
                          <mat-form-field class="sa-input-amount">
                            <input matInput placeholder="" [textMask]="{mask: currencyMask}"
                              formControlName="amountAssigned">
                            <span matPrefix>{{lanClient.credit.currencySymbol}}</span>
                            <span matSuffix>{{lanClient.credit.country}}</span>
                            <mat-error *ngIf="creditAssignForm.controls.amountAssigned.hasError('required')">
                              {{language.errorRequired}}</mat-error>
                          </mat-form-field>
                          <mat-form-field class="sa-validity-input sa-input-amount">
                            <input matInput placeholder="" [textMask]="{mask: currencyMask}"
                              formControlName="validityDate">
                            <span matPrefix>{{lanClient.credit.currencySymbol}}</span>
                            <span matSuffix>{{lanClient.credit.country}}</span>
                            <mat-error *ngIf="creditAssignForm.controls.validityDate.hasError('required')">
                              {{language.errorRequired}}</mat-error>
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="sa-right-column">
                        <div class="sa-assigning-credit-actions">
                          <button class="sa-btn-small" mat-raised-button color="white"
                            (click)="isAssignedCredit = false">{{language.cancel}}</button>
                          <button type="submit" class="sa-btn-small" mat-raised-button
                            color="charcoal-grey" [disabled]="!creditAssignForm.valid">{{lanClient.save}}</button>
                        </div>
                      </div>
                    </div>
                  </form>
                </ng-template>
              </div>
            </ng-template>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>